<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.6.3" />
<title>jumpscale.core.executors.local API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase;cursor:pointer}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>jumpscale.core.executors.local</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>Source code</summary>
<pre><code class="python">import invoke
&#34;&#34;&#34;
JS-NG&gt; j.core.executors.run_local(&#34;echo $WHOME&#34;, env={&#39;WHOME&#39;:&#39;abc&#39;}, ech
     1 o=True)                                                           
echo $WHOME
abc
&lt;Result cmd=&#39;echo $WHOME&#39; exited=0&gt;

JS-NG&gt; j.core.executors.run_local(&#34;uname&#34;, echo=True)                    
uname
Linux
&lt;Result cmd=&#39;uname&#39; exited=0&gt;

JS-NG&gt; j.core.executors.run_local(&#34;uname&#34;, echo=False)                   
Linux
&lt;Result cmd=&#39;uname&#39; exited=0&gt;

&#34;&#34;&#34;


def execute(cmd, **command_ctx):
    &#34;&#34;&#34;
    :param str shell:
        Which shell binary to use. Default: ``/bin/bash`` (on Unix;
        ``COMSPEC`` or ``cmd.exe`` on Windows.)
    :param bool warn:
        Whether to warn and continue, instead of raising
        `.UnexpectedExit`, when the executed command exits with a
        nonzero status. Default: ``False``.
        .. note::
            This setting has no effect on exceptions, which will still be
            raised, typically bundled in `.ThreadException` objects if they
            were raised by the IO worker threads.
            Similarly, `.WatcherError` exceptions raised by
            `.StreamWatcher` instances will also ignore this setting, and
            will usually be bundled inside `.Failure` objects (in order to
            preserve the execution context).
            Ditto `.CommandTimedOut` - basically, anything that prevents a
            command from actually getting to &#34;exited with an exit code&#34;
            ignores this flag.
    :param hide:
        Allows the caller to disable ``run``&#39;s default behavior of copying
        the subprocess&#39; stdout and stderr to the controlling terminal.
        Specify ``hide=&#39;out&#39;`` (or ``&#39;stdout&#39;``) to hide only the stdout
        stream, ``hide=&#39;err&#39;`` (or ``&#39;stderr&#39;``) to hide only stderr, or
        ``hide=&#39;both&#39;`` (or ``True``) to hide both streams.
        The default value is ``None``, meaning to print everything;
        ``False`` will also disable hiding.
        .. note::
            Stdout and stderr are always captured and stored in the
            ``Result`` object, regardless of ``hide``&#39;s value.
        .. note::
            ``hide=True`` will also override ``echo=True`` if both are
            given (either as kwargs or via config/CLI).
    :param bool pty:
        By default, ``run`` connects directly to the invoked process and
        reads its stdout/stderr streams. Some programs will buffer (or even
        behave) differently in this situation compared to using an actual
        terminal or pseudoterminal (pty). To use a pty instead of the
        default behavior, specify ``pty=True``.
        .. warning::
            Due to their nature, ptys have a single output stream, so the
            ability to tell stdout apart from stderr is **not possible**
            when ``pty=True``. As such, all output will appear on
            ``out_stream`` (see below) and be captured into the ``stdout``
            result attribute. ``err_stream`` and ``stderr`` will always be
            empty when ``pty=True``.
    :param bool fallback:
        Controls auto-fallback behavior re: problems offering a pty when
        ``pty=True``. Whether this has any effect depends on the specific
        `Runner` subclass being invoked. Default: ``True``.
    :param bool echo:
        Controls whether `.run` prints the command string to local stdout
        prior to executing it. Default: ``False``.
        .. note::
            ``hide=True`` will override ``echo=True`` if both are given.
    :param dict env:
        By default, subprocesses receive a copy of Invoke&#39;s own environment
        (i.e. ``os.environ``). Supply a dict here to update that child
        environment.
        For example, ``run(&#39;command&#39;, env={&#39;PYTHONPATH&#39;:
        &#39;/some/virtual/env/maybe&#39;})`` would modify the ``PYTHONPATH`` env
        var, with the rest of the child&#39;s env looking identical to the
        parent.
        .. seealso:: ``replace_env`` for changing &#39;update&#39; to &#39;replace&#39;.
    :param bool replace_env:
        When ``True``, causes the subprocess to receive the dictionary
        given to ``env`` as its entire shell environment, instead of
        updating a copy of ``os.environ`` (which is the default behavior).
        Default: ``False``.
    :param str encoding:
        Override auto-detection of which encoding the subprocess is using
        for its stdout/stderr streams (which defaults to the return value
        of `default_encoding`).
    :param out_stream:
        A file-like stream object to which the subprocess&#39; standard output
        should be written. If ``None`` (the default), ``sys.stdout`` will
        be used.
    :param err_stream:
        Same as ``out_stream``, except for standard error, and defaulting
        to ``sys.stderr``.
    :param in_stream:
        A file-like stream object to used as the subprocess&#39; standard
        input. If ``None`` (the default), ``sys.stdin`` will be used.
        If ``False``, will disable stdin mirroring entirely (though other
        functionality which writes to the subprocess&#39; stdin, such as
        autoresponding, will still function.) Disabling stdin mirroring can
        help when ``sys.stdin`` is a misbehaving non-stream object, such as
        under test harnesses or headless command runners.
    :param watchers:
        A list of `.StreamWatcher` instances which will be used to scan the
        program&#39;s ``stdout`` or ``stderr`` and may write into its ``stdin``
        (typically ``str`` or ``bytes`` objects depending on Python
        version) in response to patterns or other heuristics.
        See :doc:`/concepts/watchers` for details on this functionality.
        Default: ``[]``.
    :param bool echo_stdin:
        Whether to write data from ``in_stream`` back to ``out_stream``.
        In other words, in normal interactive usage, this parameter
        controls whether Invoke mirrors what you type back to your
        terminal.
        By default (when ``None``), this behavior is triggered by the
        following:
            * Not using a pty to run the subcommand (i.e. ``pty=False``),
                as ptys natively echo stdin to stdout on their own;
            * And when the controlling terminal of Invoke itself (as per
                ``in_stream``) appears to be a valid terminal device or TTY.
                (Specifically, when `~invoke.util.isatty` yields a ``True``
                result when given ``in_stream``.)
                .. note::
                    This property tends to be ``False`` when piping another
                    program&#39;s output into an Invoke session, or when running
                    Invoke within another program (e.g. running Invoke from
                    itself).
        If both of those properties are true, echoing will occur; if either
        is false, no echoing will be performed.
        When not ``None``, this parameter will override that auto-detection
        and force, or disable, echoing.
    :param timeout:

    &#34;&#34;&#34;
    ## use formatter to format command
    command_ctx = command_ctx or {}
    res = invoke.run(cmd, **command_ctx)
    return res.return_code, res.stdout, res.stderr</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="jumpscale.core.executors.local.execute"><code class="name flex">
<span>def <span class="ident">execute</span></span>(<span>cmd, **command_ctx)</span>
</code></dt>
<dd>
<section class="desc"><p>:param str shell:
Which shell binary to use. Default: <code>/bin/bash</code> (on Unix;
<code>COMSPEC</code> or <code>cmd.exe</code> on Windows.)
:param bool warn:
Whether to warn and continue, instead of raising
<code>.UnexpectedExit</code>, when the executed command exits with a
nonzero status. Default: <code>False</code>.
!!! note "Note"
This setting has no effect on exceptions, which will still be
raised, typically bundled in <code>.ThreadException</code> objects if they
were raised by the IO worker threads.
Similarly, <code>.WatcherError</code> exceptions raised by
<code>.StreamWatcher</code> instances will also ignore this setting, and
will usually be bundled inside <code>.Failure</code> objects (in order to
preserve the execution context).
Ditto <code>.CommandTimedOut</code> - basically, anything that prevents a
command from actually getting to "exited with an exit code"
ignores this flag.</p>
<p>:param hide:
Allows the caller to disable <code>run</code>'s default behavior of copying
the subprocess' stdout and stderr to the controlling terminal.
Specify <code>hide='out'</code> (or <code>'stdout'</code>) to hide only the stdout
stream, <code>hide='err'</code> (or <code>'stderr'</code>) to hide only stderr, or
<code>hide='both'</code> (or <code>True</code>) to hide both streams.
The default value is <code>None</code>, meaning to print everything;
<code>False</code> will also disable hiding.
!!! note "Note"
Stdout and stderr are always captured and stored in the
<code>Result</code> object, regardless of <code>hide</code>'s value.</p>
<pre><code>!!! note "Note"
    ``hide=True`` will also override ``echo=True`` if both are
    given (either as kwargs or via config/CLI).
</code></pre>
<p>:param bool pty:
By default, <code>run</code> connects directly to the invoked process and
reads its stdout/stderr streams. Some programs will buffer (or even
behave) differently in this situation compared to using an actual
terminal or pseudoterminal (pty). To use a pty instead of the
default behavior, specify <code>pty=True</code>.
!!! warning "Warning"
Due to their nature, ptys have a single output stream, so the
ability to tell stdout apart from stderr is <strong>not possible</strong>
when <code>pty=True</code>. As such, all output will appear on
<code>out_stream</code> (see below) and be captured into the <code>stdout</code>
result attribute. <code>err_stream</code> and <code>stderr</code> will always be
empty when <code>pty=True</code>.</p>
<p>:param bool fallback:
Controls auto-fallback behavior re: problems offering a pty when
<code>pty=True</code>. Whether this has any effect depends on the specific
<code>Runner</code> subclass being invoked. Default: <code>True</code>.
:param bool echo:
Controls whether <code>.run</code> prints the command string to local stdout
prior to executing it. Default: <code>False</code>.
!!! note "Note"
<code>hide=True</code> will override <code>echo=True</code> if both are given.</p>
<p>:param dict env:
By default, subprocesses receive a copy of Invoke's own environment
(i.e. <code>os.environ</code>). Supply a dict here to update that child
environment.
For example, <code>run('command', env={'PYTHONPATH':
'/some/virtual/env/maybe'})</code> would modify the <code>PYTHONPATH</code> env
var, with the rest of the child's env looking identical to the
parent.
!!! seealso "Seealso:&ensp;<code>replace_env</code> for changing 'update' to 'replace'."</p>
<p>:param bool replace_env:
When <code>True</code>, causes the subprocess to receive the dictionary
given to <code>env</code> as its entire shell environment, instead of
updating a copy of <code>os.environ</code> (which is the default behavior).
Default: <code>False</code>.
:param str encoding:
Override auto-detection of which encoding the subprocess is using
for its stdout/stderr streams (which defaults to the return value
of <code>default_encoding</code>).
:param out_stream:
A file-like stream object to which the subprocess' standard output
should be written. If <code>None</code> (the default), <code>sys.stdout</code> will
be used.
:param err_stream:
Same as <code>out_stream</code>, except for standard error, and defaulting
to <code>sys.stderr</code>.
:param in_stream:
A file-like stream object to used as the subprocess' standard
input. If <code>None</code> (the default), <code>sys.stdin</code> will be used.
If <code>False</code>, will disable stdin mirroring entirely (though other
functionality which writes to the subprocess' stdin, such as
autoresponding, will still function.) Disabling stdin mirroring can
help when <code>sys.stdin</code> is a misbehaving non-stream object, such as
under test harnesses or headless command runners.
:param watchers:
A list of <code>.StreamWatcher</code> instances which will be used to scan the
program's <code>stdout</code> or <code>stderr</code> and may write into its <code>stdin</code>
(typically <code>str</code> or <code>bytes</code> objects depending on Python
version) in response to patterns or other heuristics.
See :doc:<code>/concepts/watchers</code> for details on this functionality.
Default: <code>[]</code>.
:param bool echo_stdin:
Whether to write data from <code>in_stream</code> back to <code>out_stream</code>.
In other words, in normal interactive usage, this parameter
controls whether Invoke mirrors what you type back to your
terminal.
By default (when <code>None</code>), this behavior is triggered by the
following:
* Not using a pty to run the subcommand (i.e. <code>pty=False</code>),
as ptys natively echo stdin to stdout on their own;
* And when the controlling terminal of Invoke itself (as per
<code>in_stream</code>) appears to be a valid terminal device or TTY.
(Specifically, when <code>~invoke.util.isatty</code> yields a <code>True</code>
result when given <code>in_stream</code>.)
!!! note "Note"
This property tends to be <code>False</code> when piping another
program's output into an Invoke session, or when running
Invoke within another program (e.g. running Invoke from
itself).</p>
<pre><code>If both of those properties are true, echoing will occur; if either
is false, no echoing will be performed.
When not ``None``, this parameter will override that auto-detection
and force, or disable, echoing.
</code></pre>
<p>:param timeout:</p></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def execute(cmd, **command_ctx):
    &#34;&#34;&#34;
    :param str shell:
        Which shell binary to use. Default: ``/bin/bash`` (on Unix;
        ``COMSPEC`` or ``cmd.exe`` on Windows.)
    :param bool warn:
        Whether to warn and continue, instead of raising
        `.UnexpectedExit`, when the executed command exits with a
        nonzero status. Default: ``False``.
        .. note::
            This setting has no effect on exceptions, which will still be
            raised, typically bundled in `.ThreadException` objects if they
            were raised by the IO worker threads.
            Similarly, `.WatcherError` exceptions raised by
            `.StreamWatcher` instances will also ignore this setting, and
            will usually be bundled inside `.Failure` objects (in order to
            preserve the execution context).
            Ditto `.CommandTimedOut` - basically, anything that prevents a
            command from actually getting to &#34;exited with an exit code&#34;
            ignores this flag.
    :param hide:
        Allows the caller to disable ``run``&#39;s default behavior of copying
        the subprocess&#39; stdout and stderr to the controlling terminal.
        Specify ``hide=&#39;out&#39;`` (or ``&#39;stdout&#39;``) to hide only the stdout
        stream, ``hide=&#39;err&#39;`` (or ``&#39;stderr&#39;``) to hide only stderr, or
        ``hide=&#39;both&#39;`` (or ``True``) to hide both streams.
        The default value is ``None``, meaning to print everything;
        ``False`` will also disable hiding.
        .. note::
            Stdout and stderr are always captured and stored in the
            ``Result`` object, regardless of ``hide``&#39;s value.
        .. note::
            ``hide=True`` will also override ``echo=True`` if both are
            given (either as kwargs or via config/CLI).
    :param bool pty:
        By default, ``run`` connects directly to the invoked process and
        reads its stdout/stderr streams. Some programs will buffer (or even
        behave) differently in this situation compared to using an actual
        terminal or pseudoterminal (pty). To use a pty instead of the
        default behavior, specify ``pty=True``.
        .. warning::
            Due to their nature, ptys have a single output stream, so the
            ability to tell stdout apart from stderr is **not possible**
            when ``pty=True``. As such, all output will appear on
            ``out_stream`` (see below) and be captured into the ``stdout``
            result attribute. ``err_stream`` and ``stderr`` will always be
            empty when ``pty=True``.
    :param bool fallback:
        Controls auto-fallback behavior re: problems offering a pty when
        ``pty=True``. Whether this has any effect depends on the specific
        `Runner` subclass being invoked. Default: ``True``.
    :param bool echo:
        Controls whether `.run` prints the command string to local stdout
        prior to executing it. Default: ``False``.
        .. note::
            ``hide=True`` will override ``echo=True`` if both are given.
    :param dict env:
        By default, subprocesses receive a copy of Invoke&#39;s own environment
        (i.e. ``os.environ``). Supply a dict here to update that child
        environment.
        For example, ``run(&#39;command&#39;, env={&#39;PYTHONPATH&#39;:
        &#39;/some/virtual/env/maybe&#39;})`` would modify the ``PYTHONPATH`` env
        var, with the rest of the child&#39;s env looking identical to the
        parent.
        .. seealso:: ``replace_env`` for changing &#39;update&#39; to &#39;replace&#39;.
    :param bool replace_env:
        When ``True``, causes the subprocess to receive the dictionary
        given to ``env`` as its entire shell environment, instead of
        updating a copy of ``os.environ`` (which is the default behavior).
        Default: ``False``.
    :param str encoding:
        Override auto-detection of which encoding the subprocess is using
        for its stdout/stderr streams (which defaults to the return value
        of `default_encoding`).
    :param out_stream:
        A file-like stream object to which the subprocess&#39; standard output
        should be written. If ``None`` (the default), ``sys.stdout`` will
        be used.
    :param err_stream:
        Same as ``out_stream``, except for standard error, and defaulting
        to ``sys.stderr``.
    :param in_stream:
        A file-like stream object to used as the subprocess&#39; standard
        input. If ``None`` (the default), ``sys.stdin`` will be used.
        If ``False``, will disable stdin mirroring entirely (though other
        functionality which writes to the subprocess&#39; stdin, such as
        autoresponding, will still function.) Disabling stdin mirroring can
        help when ``sys.stdin`` is a misbehaving non-stream object, such as
        under test harnesses or headless command runners.
    :param watchers:
        A list of `.StreamWatcher` instances which will be used to scan the
        program&#39;s ``stdout`` or ``stderr`` and may write into its ``stdin``
        (typically ``str`` or ``bytes`` objects depending on Python
        version) in response to patterns or other heuristics.
        See :doc:`/concepts/watchers` for details on this functionality.
        Default: ``[]``.
    :param bool echo_stdin:
        Whether to write data from ``in_stream`` back to ``out_stream``.
        In other words, in normal interactive usage, this parameter
        controls whether Invoke mirrors what you type back to your
        terminal.
        By default (when ``None``), this behavior is triggered by the
        following:
            * Not using a pty to run the subcommand (i.e. ``pty=False``),
                as ptys natively echo stdin to stdout on their own;
            * And when the controlling terminal of Invoke itself (as per
                ``in_stream``) appears to be a valid terminal device or TTY.
                (Specifically, when `~invoke.util.isatty` yields a ``True``
                result when given ``in_stream``.)
                .. note::
                    This property tends to be ``False`` when piping another
                    program&#39;s output into an Invoke session, or when running
                    Invoke within another program (e.g. running Invoke from
                    itself).
        If both of those properties are true, echoing will occur; if either
        is false, no echoing will be performed.
        When not ``None``, this parameter will override that auto-detection
        and force, or disable, echoing.
    :param timeout:

    &#34;&#34;&#34;
    ## use formatter to format command
    command_ctx = command_ctx or {}
    res = invoke.run(cmd, **command_ctx)
    return res.return_code, res.stdout, res.stderr</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="jumpscale.core.executors" href="index.html">jumpscale.core.executors</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="jumpscale.core.executors.local.execute" href="#jumpscale.core.executors.local.execute">execute</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.6.3</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>